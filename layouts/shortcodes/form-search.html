<noscript>
  <h2>The search feature requires JavaScript</h2>
  <p>
  This website is a static website, and search data never leaves your browser.
  </p>
  <p>
  For this to work, JavaScript is necessary. Without it, the search form below
  is not functional.
  </p>
  <p>
  You can try a site-specific external search, for example, by
  <a class="external" rel="noopener noreferrer nofollow"
  href="https://duckduckgo.com/?q=site%3Azoe-translat.es">DuckDuckGo</a>.
  </p>
</noscript>
<div id="site-search" class="search-form">{{ if not hugo.IsProduction }}{{ "<!-- [html-validate-disable-next wcag/h23: no actual query HTTP action] -->" | safeHTML }}{{ end }}
  <form role="search" id="search-form">
    <div class="search-container form-item" id="search-input-container">
      <input autofocus autocomplete="off" spellcheck="false"
          class="search-form-input form-input"
          type="search"
          id="search"
          name="q"
          aria-labelledby="main-content-heading"
          aria-errormessage="search-error-content"
          aria-details="search-help-details-content"
          aria-controls="search-result-region"
          maxlength="128">
      <button id="search-act" type="button">Enter</button>
    </div>
  </form>
  <details class="search-help-details">
    <summary class="search-help-details-summary">
      {{ i18n "search_more_help" }}
    </summary>
    <ul class="details-content" id="search-help-details-content">
      <li>When multiple terms are given, a result contains at least one of
        them.</li>
      <li>For a mandatory term, use a plus sign.<br>Example:
        <code>love +fun</code> for posts with “fun” and optionally “love”.</li>
      <li>To exclude a term, use a minus sign.<br>Example:
        <code>love -friend</code> for posts with “love” but not “friend”.</li>
      <li>You can confine a term to a specific field. Supported fields are
        “author”, “title”, and “content”.<br>Example: <code>title:love</code>
        only searches for “love” in the title.</li>
    </ul>
  </details>
</div>
<hr class="search-fold">
<section id="search-output-region"
  aria-live="polite"
  aria-relevant="additions"
  aria-label="Search output"
  aria-busy="false">
  <div class="search-error hide-element" id="search-error-container">
    <span class="search-error-message" id="search-error-content"></span>
  </div>
  <div id="search-results" class="hide-element">
    <div>
      <span id="results-count-text">{{ i18n "search_results" }} </span><span id="results-count"></span>
    </div>
    <div id="search-results-body" class="post-list"></div>
  </div>
</section>
<template id="search-display-tpl">
<article class="post search-result-item" data-score="">
  <header>{{ if not hugo.IsProduction }}{{ "<!-- [html-validate-disable-next empty-heading: template target] -->" | safeHTML }}{{ end }}
    <h2 class="post-title">{{ if not hugo.IsProduction }}{{ "<!-- [html-validate-disable-next wcag/h30: template target] -->" | safeHTML }}{{ end }}
      <a href="#" class="search-result-page-title"></a>
    </h2>
    <div class="post-meta">
      <span class="tm-date"></span> — <span class="tm-author"></span>
    </div>
  </header>
  <p class="post-content"></p>
</article>
</template>
{{- /* Add lunr.js. */ -}}
{{- $lunrSearch := slice (resources.Get "js/vendor/lunr.js") -}}

{{- /* Add lunr multilanguage support. */ -}}
{{- $lunrLanguages := site.Params.search.languages | default slice -}}
{{- if gt (len $lunrLanguages) 0 -}}

    {{- $lunrSearch = $lunrSearch | append (resources.Get "js/vendor/lunr.stemmer.support.js") -}}

    {{- range $lunrLanguages -}}
        {{- $lang := . -}}
        {{- $lang = $lang | lower -}}
        {{- if and $lang (ne $lang "en") -}}
            {{- $lunrSearch = $lunrSearch | append (resources.Get (printf "js/vendor/lunr.%s.js" $lang)) -}}
        {{- end -}}
    {{- end -}}

    {{- $lunrSearch = $lunrSearch | append (resources.Get "js/vendor/lunr.multi.js") -}}

{{- end -}}

{{- /* Build lunr. */ -}}
{{- $lunrSearch = $lunrSearch | resources.Concat "js/lunr-bundle.js" -}}

{{- if hugo.IsProduction -}}
    {{- $lunrSearch = $lunrSearch | minify -}}
{{- end -}}

{{- if or (site.Params.assets.disable_fingerprinting) (not hugo.IsProduction) }}
    <script src="{{ $lunrSearch.RelPermalink }}"></script>
{{- else -}}
    {{- $lunrSearch = $lunrSearch | fingerprint }}
    <script src="{{ $lunrSearch.RelPermalink }}" integrity="{{ $lunrSearch.Data.Integrity }}"></script>
{{- end -}}

{{- /* Configure search engine. */ -}}
{{- $maxSummaryLength := site.Params.search.maxSummaryLength | default 100 -}}
{{- $maxResults := site.Params.search.maxResults | default 25 -}}
{{- $searchConfig := dict "indexURI" "/searchindex.json" "maxSummaryLength" $maxSummaryLength "maxResults" $maxResults "lunrLanguages" $lunrLanguages -}}
{{- $searchI18n := dict "noResults" (i18n "search_no_results") -}}
{{- $searchParams := dict "searchConfig" $searchConfig "i18n" $searchI18n -}}

{{- $siteSearch := slice -}}
{{- $siteSearch = $siteSearch | append (resources.Get "js/search.js") -}}
{{- $siteSearch = $siteSearch | resources.Concat "js/search-bundle.js" -}}

{{- $siteSearch = $siteSearch | js.Build (dict "format" "iife" "minify" hugo.IsProduction "target" "es2017" "params" $searchParams) -}}

{{- if or (site.Params.assets.disable_fingerprinting) (not hugo.IsProduction) }}
    <script src="{{ $siteSearch.RelPermalink }}"></script>
{{- else -}}
    {{- $siteSearch = $siteSearch | fingerprint }}
    <script src="{{ $siteSearch.RelPermalink }}" integrity="{{ $siteSearch.Data.Integrity }}"></script>
{{- end -}}
