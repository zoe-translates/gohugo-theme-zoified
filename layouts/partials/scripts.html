{{- $scripts := slice -}}
{{- $scripts = $scripts | append (resources.Get "js/ed.js") -}}
{{- $scripts = $scripts | resources.Concat "js/common.js" -}}
{{- $bdopts := dict "format" "iife" "target" "es2017" "minify" hugo.IsProduction -}}
{{- $scripts = $scripts | js.Build $bdopts -}}

{{- if or (site.Params.assets.disable_fingerprinting) (not hugo.IsProduction) }}
    <script src="{{ $scripts.RelPermalink }}" defer></script>
{{- else -}}
    {{- $scripts = $scripts | fingerprint }}
    <script src="{{ $scripts.RelPermalink }}" integrity="{{ $scripts.Data.Integrity }}" defer></script>
{{- end -}}

{{- if eq page.RelPermalink "/search/" -}}
  {{- partial "script-search.html" . -}}
{{- end -}}
